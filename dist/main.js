!function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);var s={frontPikachu:{animationFrames:33,delay:"0.04s",x:350,y:85,width:75,height:75},backPikachu:{animationFrames:35,delay:"0.03s",x:100,y:220,width:90,height:90},frontBulbasaur:{animationFrames:41,delay:"0.03s",x:350,y:100,width:60,height:60},backBulbasaur:{animationFrames:45,delay:"0.03s",x:100,y:220,width:90,height:90},frontVenusaur:{animationFrames:60,delay:"0.03s",x:300,y:45,width:140,height:110},backVenusaur:{animationFrames:63,delay:"0.03s",x:90,y:180,width:180,height:150},frontCharmander:{animationFrames:69,delay:"0.03s",x:350,y:85,width:75,height:75},backCharmander:{animationFrames:36,delay:"0.03s",x:100,y:220,width:110,height:90},frontCharizard:{animationFrames:47,delay:"0.04s",x:290,y:5,width:180,height:160},backCharizard:{animationFrames:49,delay:"0.03s",x:0,y:100,width:260,height:260},frontSquirtle:{animationFrames:29,delay:"0.04s",x:345,y:85,width:70,height:65},backSquirtle:{animationFrames:30,delay:"0.03s",x:100,y:220,width:100,height:90},frontBlastoise:{animationFrames:79,delay:"0.03s",x:300,y:60,width:110,height:100},backBlastoise:{animationFrames:83,delay:"0.03s",x:70,y:185,width:165,height:130},frontPidgeot:{animationFrames:53,delay:"0.03s",x:280,y:5,width:160,height:145},backPidgeot:{animationFrames:54,delay:"0.03s",x:55,y:100,width:220,height:230},frontNinetales:{animationFrames:59,delay:"0.03s",x:330,y:65,width:115,height:90},backNinetales:{animationFrames:63,delay:"0.03s",x:70,y:180,width:160,height:130},frontMeowth:{animationFrames:42,delay:"0.04s",x:345,y:80,width:60,height:75},backMeowth:{animationFrames:41,delay:"0.03s",x:100,y:220,width:100,height:100},frontPsyduck:{animationFrames:49,delay:"0.03s",x:345,y:80,width:75,height:75},backPsyduck:{animationFrames:52,delay:"0.03s",x:100,y:220,width:80,height:100},frontArcanine:{animationFrames:52,delay:"0.03s",x:330,y:65,width:95,height:90},backArcanine:{animationFrames:51,delay:"0.03s",x:50,y:180,width:180,height:130},frontPoliwhirl:{animationFrames:40,delay:"0.04s",x:330,y:90,width:100,height:65},backPoliwhirl:{animationFrames:43,delay:"0.03s",x:110,y:220,width:100,height:90},frontAlakazam:{animationFrames:74,delay:"0.03s",x:335,y:70,width:85,height:85},backAlakazam:{animationFrames:75,delay:"0.03s",x:100,y:200,width:115,height:115},frontMachoke:{animationFrames:32,delay:"0.04s",x:335,y:60,width:85,height:100},backMachoke:{animationFrames:35,delay:"0.03s",x:100,y:200,width:100,height:125},frontGeodude:{animationFrames:50,delay:"0.04s",x:330,y:80,width:90,height:50},backGeodude:{animationFrames:51,delay:"0.03s",x:120,y:220,width:120,height:70},frontSlowpoke:{animationFrames:49,delay:"0.03s",x:335,y:85,width:65,height:70},backSlowpoke:{animationFrames:53,delay:"0.03s",x:120,y:220,width:100,height:90},frontGrimer:{animationFrames:80,delay:"0.03s",x:330,y:90,width:95,height:65},backGrimer:{animationFrames:80,delay:"0.03s",x:110,y:220,width:120,height:85},frontShellder:{animationFrames:80,delay:"0.03s",x:345,y:115,width:60,height:40},backShellder:{animationFrames:83,delay:"0.03s",x:120,y:260,width:75,height:50},frontGengar:{animationFrames:39,delay:"0.04s",x:330,y:80,width:90,height:80},backGengar:{animationFrames:43,delay:"0.03s",x:110,y:220,width:100,height:100},frontOnix:{animationFrames:61,delay:"0.03s",x:310,y:5,width:90,height:155},backOnix:{animationFrames:64,delay:"0.03s",x:120,y:130,width:120,height:200},frontKrabby:{animationFrames:40,delay:"0.04s",x:335,y:85,width:75,height:70},backKrabby:{animationFrames:40,delay:"0.03s",x:120,y:220,width:100,height:90},frontElectrode:{animationFrames:90,delay:"0.03s",x:330,y:80,width:90,height:80},backElectrode:{animationFrames:93,delay:"0.03s",x:110,y:220,width:100,height:100},frontHitmonlee:{animationFrames:28,delay:"0.04s",x:335,y:80,width:55,height:80},backHitmonlee:{animationFrames:30,delay:"0.03s",x:130,y:200,width:60,height:110},frontHitmonchan:{animationFrames:20,delay:"0.04s",x:340,y:80,width:55,height:80},backHitmonchan:{animationFrames:23,delay:"0.03s",x:130,y:200,width:78,height:110},frontLickitung:{animationFrames:23,delay:"0.04s",x:330,y:80,width:75,height:80},backLickitung:{animationFrames:27,delay:"0.03s",x:110,y:220,width:125,height:100},frontChansey:{animationFrames:52,delay:"0.03s",x:330,y:85,width:90,height:70},backChansey:{animationFrames:52,delay:"0.03s",x:110,y:220,width:100,height:90},frontKangaskhan:{animationFrames:70,delay:"0.03s",x:330,y:60,width:100,height:100},backKangaskhan:{animationFrames:73,delay:"0.03s",x:90,y:200,width:135,height:125},frontStarmie:{animationFrames:57,delay:"0.04s",x:335,y:85,width:70,height:70},backStarmie:{animationFrames:60,delay:"0.03s",x:110,y:220,width:90,height:90},frontMrmime:{animationFrames:75,delay:"0.03s",x:330,y:70,width:85,height:85},backMrmime:{animationFrames:75,delay:"0.03s",x:105,y:200,width:115,height:115},frontScyther:{animationFrames:60,delay:"0.04s",x:310,y:55,width:115,height:100},backScyther:{animationFrames:63,delay:"0.03s",x:105,y:180,width:150,height:140},frontJynx:{animationFrames:60,delay:"0.04s",x:330,y:80,width:95,height:75},backJynx:{animationFrames:60,delay:"0.03s",x:115,y:210,width:105,height:105},frontElectabuzz:{animationFrames:39,delay:"0.04s",x:325,y:70,width:90,height:85},backElectabuzz:{animationFrames:39,delay:"0.04s",x:90,y:210,width:130,height:105},frontPinsir:{animationFrames:40,delay:"0.04s",x:315,y:70,width:100,height:85},backPinsir:{animationFrames:40,delay:"0.03s",x:110,y:210,width:110,height:105},frontTauros:{animationFrames:48,delay:"0.03s",x:330,y:65,width:95,height:90},backTauros:{animationFrames:51,delay:"0.03s",x:30,y:200,width:220,height:130},frontMagikarp:{animationFrames:29,delay:"0.04s",x:340,y:100,width:60,height:60},backMagikarp:{animationFrames:33,delay:"0.03s",x:120,y:240,width:75,height:75},frontGyarados:{animationFrames:59,delay:"0.03s",x:320,y:40,width:125,height:115},backGyarados:{animationFrames:63,delay:"0.03s",x:15,y:190,width:230,height:150},frontLapras:{animationFrames:89,delay:"0.03s",x:320,y:70,width:105,height:90},backLapras:{animationFrames:93,delay:"0.03s",x:80,y:200,width:150,height:120},frontVaporeon:{animationFrames:63,delay:"0.03s",x:325,y:80,width:105,height:80},backVaporeon:{animationFrames:67,delay:"0.03s",x:65,y:215,width:160,height:110},frontJolteon:{animationFrames:40,delay:"0.04s",x:340,y:85,width:55,height:75},backJolteon:{animationFrames:39,delay:"0.04s",x:100,y:230,width:100,height:95},frontFlareon:{animationFrames:29,delay:"0.04s",x:340,y:70,width:65,height:90},backFlareon:{animationFrames:30,delay:"0.03s",x:100,y:200,width:110,height:130},frontAerodactyl:{animationFrames:39,delay:"0.04s",x:280,y:20,width:180,height:145},backAerodactyl:{animationFrames:40,delay:"0.03s",x:55,y:120,width:250,height:250},frontArticuno:{animationFrames:40,delay:"0.03s",x:260,y:0,width:210,height:180},backArticuno:{animationFrames:39,delay:"0.03s",x:20,y:115,width:270,height:235},frontZapdos:{animationFrames:30,delay:"0.04s",x:285,y:35,width:165,height:120},backZapdos:{animationFrames:30,delay:"0.03s",x:60,y:165,width:215,height:160},frontMoltres:{animationFrames:46,delay:"0.05s",x:270,y:10,width:210,height:180},backMoltres:{animationFrames:97,delay:"0.05s",x:30,y:115,width:270,height:245},frontDragonite:{animationFrames:44,delay:"0.03s",x:325,y:50,width:100,height:100},backDragonite:{animationFrames:48,delay:"0.03s",x:60,y:190,width:160,height:135},frontMewtwo:{animationFrames:90,delay:"0.03s",x:330,y:60,width:125,height:100},backMewtwo:{animationFrames:93,delay:"0.03s",x:-20,y:180,width:230,height:140}};var i={screenX:10,screenY:160,backgroundWidth:500,backgroundHeight:360,instructionXStart:300,instructionYStart:0,instructionWidth:400,instructionHeight:400,instructionButtonWidth:100,instructionButtonHeight:28,xXStart:320,xXEnd:340,xYStart:170,xYEnd:190,textXStart:520,textYStart:30,textWidth:400,textHeight:440,turnDisplayX:30,turnDisplayY:415,turnDisplayWidth:150,turnDisplayHeight:30,moveXStart:190,moveYStart:380,moveXMargin:20,moveWidth:150,moveHeight:40,moveClickY:540,pokemonXStart:0,pokemonYStart:480,pokemonXMargin:20,pokemonWidth:130,pokemonHeight:30,pokemonXStart2:140,pokemonYStart2:40,iconXStart:58,iconYStart:18,hpYStart:525,hpBarYStart:517,hpBarXMargin:50};var r={selectedPokemon:"#e0d9ce"};var n={normal:"#a8a878",rock:"#93802d",ground:"#e0c068",flying:"#a890f0",psychic:"#f85888",ghost:"#554374",fighting:"#9d2721",fire:"#f08030",electric:"#f8d030",ice:"#98d8d8",dark:"#362A23",water:"#386ceb",grass:"#5ca935",poison:"#803380",dragon:"#4c08ef",bug:"#a8b820",fairy:"#F98CFF",steel:"#9797ba"};var o={"Aerial Ace":{power:60,accuracy:100,type:"flying",category:"physical"},"Air Slash":{power:75,accuracy:95,type:"flying",category:"special"},Amnesia:{power:0,type:"psychic",self:!0,categories:["spDef"],multipliers:[2]},"Ancient Power":{power:60,accuracy:100,type:"rock",category:"special"},"Aqua Jet":{power:40,accuracy:100,type:"water",category:"physical",priority:1},"Aura Sphere":{power:80,accuracy:100,type:"fighting",category:"special"},Avalanche:{power:60,accuracy:100,type:"ice",category:"physical"},Bite:{power:60,accuracy:100,type:"dark",category:"physica;"},"Blaze Kick":{power:85,accuracy:90,type:"fire",category:"physical"},Blizzard:{power:120,accuracy:70,type:"ice",category:"special"},"Brave Bird":{power:120,accuracy:100,type:"flying",category:"physical",recoil:33},"Brick Break":{power:75,accuracy:100,type:"fighting",category:"physical"},"Calm Mind":{power:0,type:"psychic",self:!0,categories:["spAtk","spDef"],multipliers:[1,1]},"Close Combat":{power:120,accuracy:100,type:"fighting",category:"physical",self:!0,categories:["spDef","defense"],multipliers:[-1,-1]},Crabhammer:{power:90,accuracy:90,type:"water",category:"physical"},Crunch:{power:80,accuracy:100,type:"dark",category:"physical"},Curse:{power:0,type:"ghost",self:!0,categories:["attack","defense","speed"],multipliers:[1,1,-1]},"Dark Pulse":{power:80,accuracy:100,type:"dark",category:"special"},"Dazzling Gleam":{power:80,accuracy:100,type:"fairy",category:"special"},"Double-Edge":{power:120,accuracy:100,type:"normal",category:"physical",recoil:33},"Dragon Dance":{power:0,type:"dragon",self:!0,categories:["attack","speed"],multipliers:[1,1]},"Dragon Pulse":{power:85,accuracy:100,type:"dragon",category:"special"},"Drain Punch":{power:75,accuracy:100,type:"fighting",category:"physical",recoil:-50},Earthquake:{power:100,accuracy:100,type:"ground",category:"physical"},"Energy Ball":{power:90,accuracy:100,type:"grass",category:"special"},Explosion:{power:99999,accuracy:100,type:"normal",category:"physical",recoil:99999},"Extreme Speed":{power:80,accuracy:100,type:"normal",category:"physical",priority:2},"Fire Blast":{power:120,accuracy:85,type:"fire",category:"special"},"Fire Punch":{power:75,accuracy:100,type:"fire",category:"physical"},Flamethrower:{power:90,accuracy:100,type:"fire",category:"special"},"Flare Blitz":{power:120,accuracy:100,type:"fire",category:"physical",recoil:33},"Focus Blast":{power:120,accuracy:70,type:"fighting",category:"special"},"Giga Drain":{power:75,accuracy:100,type:"grass",category:"special",recoil:-50},Growth:{power:0,type:"grass",self:!0,categories:["attack","spAtk"],multipliers:[1,1]},"Gunk Shot":{power:120,accuracy:80,type:"poison",category:"physical"},"Heat Wave":{power:95,accuracy:90,type:"fire",category:"special"},"Hidden Power Fire":{power:60,accuracy:100,type:"fire",category:"special"},"Hidden Power Grass":{power:60,accuracy:100,type:"grass",category:"special"},"Hidden Power Ice":{power:60,accuracy:100,type:"ice",category:"special"},"High Jump Kick":{power:130,accuracy:90,type:"fighting",category:"physical"},Hurricane:{power:120,accuracy:70,type:"flying",category:"special"},"Hydro Pump":{power:110,accuracy:80,type:"water",category:"special"},"Ice Beam":{power:90,accuracy:100,type:"ice",category:"special"},"Ice Punch":{power:75,accuracy:100,type:"ice",category:"physical"},"Iron Head":{power:80,accuracy:100,type:"steel",category:"physical"},"Mach Punch":{power:40,accuracy:100,type:"fighting",category:"physical",priority:1},"Mega Kick":{power:120,accuracy:75,type:"normal",category:"physical"},"Morning Sun":{power:0,type:"fire",self:!0,categories:["hp"],multipliers:[50]},"Nasty Plot":{power:0,type:"dark",self:!0,categories:["spAtk"],multipliers:[2]},Outrage:{power:120,accuracy:100,type:"dragon",category:"physical"},"Power Whip":{power:120,accuracy:85,type:"grass",category:"physical"},Psychic:{power:90,accuracy:100,type:"psychic",category:"special"},Psystrike:{power:100,accuracy:100,type:"psychic",category:"special"},"Quick Attack":{power:40,accuracy:100,type:"normal",category:"physical",priority:1},"Razor Shell":{power:75,accuracy:95,type:"water",category:"physical"},Recover:{power:0,type:"normal",self:!0,categories:["hp"],multipliers:[50]},Return:{power:102,accuracy:100,type:"normal",category:"physical"},Roost:{power:0,type:"flying",self:!0,categories:["hp"],multipliers:[50]},"Seismic Toss":{power:"level",accuracy:100,type:"fighting"},"Shadow Ball":{power:80,accuracy:100,type:"ghost",category:"special"},"Shadow Claw":{power:70,accuracy:100,type:"ghost",category:"physical"},"Shadow Sneak":{power:40,accuracy:100,type:"ghost",category:"physical",priority:1},"Sheer Cold":{power:99999,accuracy:30,type:"ice",category:"special"},"Shell Smash":{power:0,type:"normal",self:!0,categories:["attack","defense","spAtk","spDef","speed"],multipliers:[1,-1,1,-1,1]},"Signal Beam":{power:75,accuracy:100,type:"bug",category:"special"},"Slack Off":{power:0,type:"normal",self:!0,categories:["hp"],multipliers:[50]},"Sludge Bomb":{power:90,accuracy:100,type:"poison",category:"special"},"Soft-Boiled":{power:0,type:"normal",self:!0,categories:["hp"],multipliers:[50]},Splash:{power:0,type:"water"},"Stone Edge":{power:100,accuracy:80,type:"rock",category:"physical"},Surf:{power:95,accuracy:100,type:"water",category:"special"},Superpower:{power:120,accuracy:100,type:"fighting",category:"physical",self:!0,categories:["attack","defense"],multipliers:[-1,-1]},"Swords Dance":{power:0,type:"normal",self:!0,categories:["attack"],multipliers:[2]},Synthesis:{power:0,type:"grass",self:!0,categories:["hp"],multipliers:[50]},Thunder:{power:110,accuracy:70,type:"electric",category:"special"},Thunderbolt:{power:90,accuracy:100,type:"electric",category:"special"},"Thunder Punch":{power:75,accuracy:100,type:"electric",category:"physical"},Waterfall:{power:80,accuracy:100,type:"water",category:"physical"},"Wild Charge":{power:90,accuracy:100,type:"electric",category:"physical",recoil:25},"Work Up":{power:0,type:"normal",self:!0,categories:["attack","spAtk"],multipliers:[1,1]},"X-Scissor":{power:80,accuracy:100,type:"bug",category:"physical"},"Zen Headbutt":{power:80,accuracy:90,type:"psychic",category:"physical"}};var c={Aerodactyl:{hp:80,attack:105,defense:65,spAtk:60,spDef:75,speed:130,moves:{"Stone Edge":o["Stone Edge"],Earthquake:o.Earthquake,"Aerial Ace":o["Aerial Ace"],Roost:o.Roost},types:["rock","flying"]},Alakazam:{hp:55,attack:50,defense:45,spAtk:135,spDef:85,speed:120,moves:{Psychic:o.Psychic,"Focus Blast":o["Focus Blast"],"Shadow Ball":o["Shadow Ball"],"Calm Mind":o["Calm Mind"]},types:["psychic"]},Arcanine:{hp:90,attack:110,defense:80,spAtk:100,spDef:80,speed:95,moves:{"Flare Blitz":o["Flare Blitz"],"Extreme Speed":o["Extreme Speed"],"Wild Charge":o["Wild Charge"],"Morning Sun":o["Morning Sun"]},types:["fire"]},Articuno:{hp:90,attack:85,defense:100,spAtk:95,spDef:125,speed:85,moves:{"Ice Beam":o["Ice Beam"],Blizzard:o.Blizzard,Hurricane:o.Hurricane,Roost:o.Roost},types:["ice","flying"]},Blastoise:{hp:79,attack:83,defense:100,spAtk:85,spDef:105,speed:78,moves:{"Hydro Pump":o["Hydro Pump"],"Ice Beam":o["Ice Beam"],"Aura Sphere":o["Aura Sphere"],"Dark Pulse":o["Dark Pulse"]},types:["water"]},Bulbasaur:{hp:45,attack:49,defense:49,spAtk:65,spDef:65,speed:45,moves:{"Sludge Bomb":o["Sludge Bomb"],"Giga Drain":o["Giga Drain"],"Hidden Power":o["Hidden Power Fire"],Growth:o.Growth},types:["grass","poison"]},Chansey:{hp:250,attack:5,defense:5,spAtk:20,spDef:105,speed:50,moves:{"Soft-Boiled":o["Soft-Boiled"],"Seismic Toss":o["Seismic Toss"],Flamethrower:o.Flamethrower,"Ice Beam":o["Ice Beam"]},types:["normal"]},Charizard:{hp:78,attack:84,defense:78,spAtk:109,spDef:85,speed:100,moves:{"Fire Blast":o["Fire Blast"],Flamethrower:o.Flamethrower,"Air Slash":o["Air Slash"],"Focus Blast":o["Focus Blast"]},types:["fire","flying"]},Charmander:{hp:39,attack:52,defense:43,spAtk:60,spDef:50,speed:65,moves:{"Fire Blast":o["Fire Blast"],Flamethrower:o.Flamethrower,"Dragon Pulse":o["Dragon Pulse"],"Ancient Power":o["Ancient Power"]},types:["fire"]},Dragonite:{hp:91,attack:134,defense:95,spAtk:100,spDef:100,speed:80,moves:{"Dragon Dance":o["Dragon Dance"],Outrage:o.Outrage,"Extreme Speed":o["Extreme Speed"],Earthquake:o.Earthquake},types:["dragon","flying"]},Electabuzz:{hp:65,attack:83,defense:57,spAtk:95,spDef:85,speed:105,moves:{Thunder:o.Thunder,Thunderbolt:o.Thunderbolt,"Focus Blast":o["Focus Blast"],"Hidden Power":o["Hidden Power Ice"]},types:["electric"]},Electrode:{hp:60,attack:50,defense:70,spAtk:80,spDef:80,speed:140,moves:{Thunder:o.Thunder,Thunderbolt:o.Thunderbolt,Explosion:o.Explosion,"Hidden Power":o["Hidden Power Ice"]},types:["electric"]},Flareon:{hp:65,attack:130,defense:60,spAtk:95,spDef:110,speed:65,moves:{"Flare Blitz":o["Flare Blitz"],Superpower:o.Superpower,"Quick Attack":o["Quick Attack"],"Double-Edge":o["Double-Edge"]},types:["fire"]},Gengar:{hp:60,attack:65,defense:60,spAtk:130,spDef:75,speed:110,moves:{"Shadow Ball":o["Shadow Ball"],"Sludge Bomb":o["Sludge Bomb"],"Focus Blast":o["Focus Blast"],"Dark Pulse":o["Dark Pulse"]},types:["ghost","poison"]},Geodude:{hp:40,attack:80,defense:100,spAtk:30,spDef:30,speed:20,moves:{"Stone Edge":o["Stone Edge"],Earthquake:o.Earthquake,"Fire Punch":o["Fire Punch"],Explosion:o.Explosion},types:["rock","ground"]},Grimer:{hp:80,attack:80,defense:50,spAtk:40,spDef:50,speed:25,moves:{"Gunk Shot":o["Gunk Shot"],"Fire Punch":o["Fire Punch"],"Shadow Sneak":o["Shadow Sneak"],Curse:o.Curse},types:["poison"]},Gyarados:{hp:95,attack:125,defense:79,spAtk:60,spDef:100,speed:81,moves:{"Dragon Dance":o["Dragon Dance"],Waterfall:o.Waterfall,Earthquake:o.Earthquake,Crunch:o.Crunch},types:["water","flying"]},Hitmonchan:{hp:50,attack:105,defense:79,spAtk:35,spDef:110,speed:76,moves:{"Drain Punch":o["Drain Punch"],"Mach Punch":o["Mach Punch"],"Ice Punch":o["Ice Punch"],"Fire Punch":o["Fire Punch"]},types:["fighting"]},Hitmonlee:{hp:50,attack:120,defense:53,spAtk:35,spDef:110,speed:87,moves:{"Mach Punch":o["Mach Punch"],"High Jump Kick":o["High Jump Kick"],"Mega Kick":o["Mega Kick"],"Blaze Kick":o["Blaze Kick"]},types:["fighting"]},Jolteon:{hp:65,attack:65,defense:60,spAtk:110,spDef:95,speed:130,moves:{Thunder:o.Thunder,"Signal Beam":o["Signal Beam"],"Shadow Ball":o["Shadow Ball"],"Hidden Power":o["Hidden Power Ice"]},types:["electric"]},Jynx:{hp:65,attack:50,defense:35,spAtk:115,spDef:95,speed:95,moves:{"Ice Beam":o["Ice Beam"],Psychic:o.Psychic,"Focus Blast":o["Focus Blast"],"Nasty Plot":o["Nasty Plot"]},types:["ice","psychic"]},Kangaskhan:{hp:105,attack:95,defense:80,spAtk:40,spDef:80,speed:90,moves:{Return:o.Return,Earthquake:o.Earthquake,"Drain Punch":o["Drain Punch"],Crunch:o.Crunch},types:["normal"]},Krabby:{hp:30,attack:105,defense:90,spAtk:25,spDef:25,speed:50,moves:{"Swords Dance":o["Swords Dance"],Crabhammer:o.Crabhammer,Superpower:o.Superpower,"X-Scissor":o["X-Scissor"]},types:["water"]},Lapras:{hp:130,attack:85,defense:80,spAtk:85,spDef:95,speed:60,moves:{"Hydro Pump":o["Hydro Pump"],"Ice Beam":o["Ice Beam"],Psychic:o.Psychic,"Sheer Cold":o["Sheer Cold"]},types:["water","ice"]},Lickitung:{hp:90,attack:55,defense:75,spAtk:60,spDef:75,speed:30,moves:{Curse:o.Curse,Return:o.Return,"Power Whip":o["Power Whip"],Earthquake:o.Earthquake},types:["normal"]},Machoke:{hp:80,attack:100,defense:70,spAtk:50,spDef:60,speed:45,moves:{"Close Combat":o["Close Combat"],"Stone Edge":o["Stone Edge"],Earthquake:o.Earthquake,"Thunder Punch":o["Thunder Punch"]},types:["fighting"]},Magikarp:{hp:20,attack:10,defense:55,spAtk:15,spDef:20,speed:80,moves:{Splash:o.Splash},types:["water"]},Meowth:{hp:40,attack:45,defense:35,spAtk:40,spDef:40,speed:90,moves:{"Double-Edge":o["Double-Edge"],"Gunk Shot":o["Gunk Shot"],Bite:o.Bite,"Shadow Claw":o["Shadow Claw"]},types:["normal"]},Mewtwo:{hp:106,attack:110,defense:90,spAtk:154,spDef:90,speed:130,moves:{"Calm Mind":o["Calm Mind"],Recover:o.Recover,Psystrike:o.Psystrike,"Ice Beam":o["Ice Beam"]},types:["psychic"]},Moltres:{hp:90,attack:100,defense:90,spAtk:125,spDef:85,speed:90,moves:{"Fire Blast":o["Fire Blast"],Hurricane:o.Hurricane,Roost:o.Roost,"Hidden Power":o["Hidden Power Grass"]},types:["fire","flying"]},Mrmime:{hp:40,attack:45,defense:65,spAtk:100,spDef:120,speed:90,moves:{Psychic:o.Psychic,"Dazzling Gleam":o["Dazzling Gleam"],"Focus Blast":o["Focus Blast"],"Nasty Plot":o["Nasty Plot"]},types:["psychic","fairy"]},Ninetales:{hp:73,attack:76,defense:75,spAtk:81,spDef:100,speed:100,moves:{"Fire Blast":o["Fire Blast"],"Energy Ball":o["Energy Ball"],"Dark Pulse":o["Dark Pulse"],"Nasty Plot":o["Nasty Plot"]},types:["fire"]},Onix:{hp:35,attack:45,defense:160,spAtk:30,spDef:45,speed:70,moves:{"Stone Edge":o["Stone Edge"],Earthquake:o.Earthquake,"Iron Head":o["Iron Head"],Explosion:o.Explosion},types:["rock","ground"]},Pidgeot:{hp:83,attack:80,defense:75,spAtk:70,spDef:70,speed:91,moves:{"Brave Bird":o["Brave Bird"],Return:o.Return,"Quick Attack":o["Quick Attack"],Roost:o.Roost},types:["normal","flying"]},Pikachu:{hp:35,attack:55,defense:30,spAtk:50,spDef:40,speed:90,moves:{Thunderbolt:o.Thunderbolt,"Hidden Power":o["Hidden Power Ice"],Surf:o.Surf,"Quick Attack":o["Quick Attack"]},types:["pikachu"]},Pinsir:{hp:65,attack:125,defense:100,spAtk:55,spDef:70,speed:85,moves:{"Swords Dance":o["Swords Dance"],"X-Scissor":o["X-Scissor"],Earthquake:o.Earthquake,"Quick Attack":o["Quick Attack"]},types:["bug"]},Poliwhirl:{hp:40,attack:50,defense:40,spAtk:40,spDef:40,speed:90,moves:{"Hydro Pump":o["Hydro Pump"],"Ice Beam":o["Ice Beam"],"Hidden Power":o["Hidden Power Grass"],Psychic:o.Psychic},types:["water"]},Psyduck:{hp:50,attack:52,defense:48,spAtk:65,spDef:50,speed:55,moves:{"Hydro Pump":o["Hydro Pump"],"Ice Beam":o["Ice Beam"],Amnesia:o.Amnesia,Psychic:o.Psychic},types:["water"]},Scyther:{hp:70,attack:110,defense:80,spAtk:55,spDef:80,speed:105,moves:{"Swords Dance":o["Swords Dance"],"X-Scissor":o["X-Scissor"],"Aerial Ace":o["Aerial Ace"],Roost:o.Roost},types:["bug","flying"]},Shellder:{hp:30,attack:65,defense:100,spAtk:45,spDef:25,speed:40,moves:{"Shell Smash":o["Shell Smash"],"Razor Shell":o["Razor Shell"],Avalanche:o.Avalanche,Explosion:o.Explosion},types:["water"]},Slowpoke:{hp:90,attack:65,defense:65,spAtk:40,spDef:40,speed:15,moves:{Psychic:o.Psychic,"Slack Off":o["Slack Off"],Surf:o.Surf,Amnesia:o.Amnesia},types:["water"]},Squirtle:{hp:44,attack:48,defense:65,spAtk:50,spDef:64,speed:43,moves:{"Aqua Jet":o["Aqua Jet"],Waterfall:o.Waterfall,"Ice Punch":o["Ice Punch"],"Brick Break":o["Brick Break"]},types:["water"]},Starmie:{hp:60,attack:75,defense:85,spAtk:100,spDef:85,speed:115,moves:{Psychic:o.Psychic,"Hydro Pump":o["Hydro Pump"],"Ice Beam":o["Ice Beam"],Thunderbolt:o.Thunderbolt},types:["water","psychic"]},Tauros:{hp:75,attack:100,defense:95,spAtk:40,spDef:70,speed:110,moves:{"Double-Edge":o["Double-Edge"],Earthquake:o.Earthquake,"Zen Headbutt":o["Zen Headbutt"],"Work Up":o["Work Up"]},types:["normal"]},Vaporeon:{hp:130,attack:65,defense:60,spAtk:110,spDef:95,speed:65,moves:{"Hydro Pump":o["Hydro Pump"],"Ice Beam":o["Ice Beam"],"Hidden Power":o["Hidden Power Grass"],"Quick Attack":o["Quick Attack"]},types:["water"]},Venusaur:{hp:80,attack:82,defense:83,spAtk:100,spDef:100,speed:80,moves:{"Sludge Bomb":o["Sludge Bomb"],"Giga Drain":o["Giga Drain"],"Hidden Power":o["Hidden Power Fire"],Synthesis:o.Synthesis},types:["grass","poison"]},Zapdos:{hp:90,attack:90,defense:85,spAtk:125,spDef:90,speed:100,moves:{Thunderbolt:o.Thunderbolt,"Hidden Power":o["Hidden Power Ice"],Roost:o.Roost,"Heat Wave":o["Heat Wave"]},types:["electric","flying"]}};var h={normal:{rock:.5,steel:.5,ghost:0},fire:{fire:.5,water:.5,grass:2,ice:2,bug:2,rock:.5,dragon:.5,steel:2},water:{fire:2,water:.5,grass:.5,ground:2,rock:2,dragon:.5},electric:{water:2,electric:.5,grass:.5,ground:0,flying:2,dragon:.5},grass:{fire:.5,water:2,grass:.5,poison:.5,ground:2,flying:.5,bug:.5,rock:2,dragon:.5,steel:.5},ice:{fire:.5,water:.5,grass:2,ice:.5,ground:2,flying:2,dragon:2,steel:.5},fighting:{normal:2,ice:2,poison:.5,flying:.5,psychic:.5,bug:.5,rock:2,ghost:0,dark:2,steel:2,fairy:.5},poison:{grass:2,poison:.5,ground:.5,rock:.5,ghost:.5,steel:0,fairy:2},ground:{fire:2,electric:2,grass:.5,poison:2,flying:0,bug:.5,rock:2,steel:2},flying:{electric:.5,grass:2,fighting:2,bug:2,rock:.5,steel:.5},psychic:{fighting:2,poison:2,psychic:.5,dark:0,steel:.5},bug:{fire:.5,grass:2,fighting:.5,poison:.5,flying:.5,psychic:2,ghost:.5,dark:2,steel:.5,fairy:.5},rock:{fire:2,ice:2,fighting:.5,ground:.5,flying:2,bug:2,steel:.5},ghost:{normal:0,psychic:2,ghost:2,dark:.5},dragon:{dragon:2,steel:.5,fairy:0},dark:{fighting:.5,psychic:2,ghost:2,dark:.5,fairy:.5},steel:{fire:.5,water:.5,electric:.5,ice:2,rock:2,steel:.5,fairy:2},fairy:{fire:.5,fighting:2,poison:.5,dragon:2,dark:2,steel:.5}};class l{constructor(e){this.name=e,this.currentStats=Object.assign({},c[e]),this.currentStats.hp=141+2*this.currentStats.hp,this.fullHealth=this.currentStats.hp,this.statChanges={attack:0,defense:0,spAtk:0,spDef:0,speed:0}}resetStats(){this.statChanges={attack:0,defense:0,spAtk:0,spDef:0,speed:0};let e=this.currentStats.hp;this.currentStats=Object.assign({},c[this.name]),this.currentStats.hp=e}}class p{constructor(e="test"){this.name=e.slice(0,7),this.party=this.randomPokemon(),this.switched=!1,this.move=null,this.faint=!1}randomPokemon(){let e=[],t=[];const a=Object.keys(c);for(;6!=e.length;){let s=a[Math.floor(Math.random()*a.length)];t.includes(s)||(t.push(s),e.push(new l(s)))}return e}}class y{constructor(e){this.canvas=e,this.ctx=e.getContext("2d"),this.dimensions={width:e.width,height:e.height},this.player1=new p,this.player2=new p,this.setAudio(),this.currentPlayer=this.player1,this.frameCount=0,this.currentLoopIndex1=0,this.currentLoopIndex2=0,this.xStart=i.pokemonXStart+i.pokemonXMargin+i.screenX,this.yStart=i.pokemonYStart+i.screenY,this.turnCounter=1,this.messages={"Turn 1":[]},this.paused=!0,this.getAnimationInfo(),this.background=this.setBackground(),this.bindEventHandlers(),this.drawBackground(this.background),this.drawTextbox(),this.drawOptionsDisplay(),this.instructionsDisplay(),this.drawPokemon()}setAudio(){this.audio=document.getElementById("music");let e=Math.floor(19*Math.random())+1;16!==e&&17!==e||(e=12),18!==e&&19!==e||(e=15),this.audio.src="audio/audio"+e.toString()+".mp3"}instructionsDisplay(){let e=new Image;e.src=this.src1[this.currentLoopIndex1];let t=new Image;t.src=this.src2[this.currentLoopIndex2],t.onload=()=>{this.drawBackground(this.background);let a="front"+this.firstPoke1,r="back"+this.firstPoke2;this.ctx.drawImage(e,s[a].x,s[a].y,s[a].width,s[a].height),this.ctx.drawImage(t,s[r].x,s[r].y,s[r].width,s[r].height),this.ctx.fillStyle="black",this.ctx.fillRect(i.instructionXStart,i.instructionYStart,i.instructionWidth,i.instructionHeight),this.ctx.fillStyle="#FFFBCE",this.ctx.fillRect(i.instructionXStart+4,i.instructionYStart+4,i.instructionWidth-8,i.instructionHeight-8),this.ctx.fillStyle="black",this.ctx.font="20px Verdana",this.ctx.fillText("X",i.instructionXStart+15,i.instructionYStart+30),this.ctx.font="bold 20px Verdana",this.ctx.fillText("Instructions",i.instructionXStart+130,i.instructionYStart+30),this.ctx.font="14px Verdana",this.ctx.fillText("This Pokemon Battle Simulator randomly generates",i.instructionXStart+15,i.instructionYStart+60),this.ctx.fillText("two teams of six Pokemon.",i.instructionXStart+15,i.instructionYStart+80),this.ctx.fillText("Players will take turns selecting moves with",i.instructionXStart+15,i.instructionYStart+110),this.ctx.fillText("which to attack or other Pokemon to switch in.",i.instructionXStart+15,i.instructionYStart+130),this.ctx.fillText("Text commentary is shown on the right side.",i.instructionXStart+15,i.instructionYStart+160),this.ctx.fillText("A player is declared the winner once all of his",i.instructionXStart+15,i.instructionYStart+190),this.ctx.fillText("or her opponent's Pokemon have fainted!",i.instructionXStart+15,i.instructionYStart+210),this.ctx.fillText("Press the 'X' on the top left corner to close",i.instructionXStart+15,i.instructionYStart+240),this.ctx.fillText("this instructions pane.",i.instructionXStart+15,i.instructionYStart+260)}}getAnimationInfo(){this.firstPoke1=this.player2.party[0].name,this.firstPoke2=this.player1.party[0].name,this.cycleLoop1=[...Array(s["front"+this.firstPoke1].animationFrames).keys()],this.cycleLoop2=[...Array(s["back"+this.firstPoke2].animationFrames).keys()],this.src1=this.cycleLoop1.map(e=>e<10?"images/pokemon/"+this.firstPoke1.toLowerCase()+"-front/frame_0"+e.toString()+"_delay-"+s["front"+this.firstPoke1].delay+".gif":"images/pokemon/"+this.firstPoke1.toLowerCase()+"-front/frame_"+e.toString()+"_delay-"+s["front"+this.firstPoke1].delay+".gif"),this.src2=this.cycleLoop2.map(e=>e<10?"images/pokemon/"+this.firstPoke2.toLowerCase()+"-back/frame_0"+e.toString()+"_delay-"+s["back"+this.firstPoke2].delay+".gif":"images/pokemon/"+this.firstPoke2.toLowerCase()+"-back/frame_"+e.toString()+"_delay-"+s["back"+this.firstPoke2].delay+".gif")}setBackground(){const e=[...Array(8).keys()].map(e=>"images/backgrounds/background"+e.toString()+".png");let t=new Image;return t.src=e[Math.floor(Math.random()*e.length)],t}drawBackground(e){this.ctx.drawImage(e,0,0,i.backgroundWidth,i.backgroundHeight)}drawTextbox(){this.ctx.fillStyle="black",this.ctx.fillRect(i.textXStart,0,i.instructionButtonWidth,i.instructionButtonHeight),this.ctx.fillStyle="white",this.ctx.fillRect(i.textXStart+1,1,i.instructionButtonWidth-2,i.instructionButtonHeight-2),this.ctx.font="bold 12px Verdana",this.ctx.fillStyle="black",this.ctx.fillText("Instructions",i.textXStart+8,18),this.ctx.fillRect(i.textXStart,i.textYStart,i.textWidth,i.textHeight),this.ctx.fillStyle="white",this.ctx.fillRect(i.textXStart+1,i.textYStart+1,i.textWidth-2,i.textHeight-2),this.messageDisplay()}drawPokemon(){let e=new Image;e.src=this.src1[this.currentLoopIndex1];let t=new Image;t.src=this.src2[this.currentLoopIndex2],t.onload=()=>{if(!this.paused&&(this.frameCount++,this.frameCount>1)){this.ctx.clearRect(0,0,i.backgroundWidth,i.backgroundHeight+10),this.drawBackground(this.background);let a="front"+this.firstPoke1,r="back"+this.firstPoke2;this.ctx.drawImage(e,s[a].x,s[a].y,s[a].width,s[a].height),this.ctx.drawImage(t,s[r].x,s[r].y,s[r].width,s[r].height),this.currentLoopIndex2++,this.currentLoopIndex2>=this.cycleLoop2.length&&(this.currentLoopIndex2=0),this.currentLoopIndex1++,this.currentLoopIndex1>=this.cycleLoop1.length&&(this.currentLoopIndex1=0),this.frameCount=0}window.requestAnimationFrame(()=>this.drawPokemon())}}drawOptionsDisplay(){this.turnDisplay(),this.movesDisplay(),this.switchDisplay()}messageDisplay(){this.ctx.clearRect(i.textXStart+2,i.textYStart+2,i.textWidth-3,i.textHeight-3);let e=30+i.textYStart;this.ctx.fillStyle="black",Object.keys(this.messages).forEach(t=>{this.ctx.font="bold 20px Verdana",e<=460&&this.ctx.fillText(t,i.textXStart+20,e),e+=20,this.messages[t].forEach(t=>{this.ctx.font="14px Verdana",e<=460&&this.ctx.fillText(t,i.textXStart+20,e),e+=20}),e+=10}),e>460&&(delete this.messages[Object.keys(this.messages)[0]],this.messageDisplay())}turnDisplay(){this.ctx.clearRect(i.turnDisplayX,i.turnDisplayY-30,i.turnDisplayWidth,2*i.turnDisplayHeight+10),this.ctx.font="bold 22px Verdana",this.ctx.fillStyle="black",this.ctx.fillText(this.currentPlayer===this.player1?this.player1.name+"'s":this.player2.name+"'s",i.turnDisplayX,i.turnDisplayY);let e=this.currentPlayer.party[0].currentStats.hp<=0?"Switch!":"Turn!";this.ctx.fillText(e,i.turnDisplayX,i.turnDisplayY+i.turnDisplayHeight)}movesDisplay(){this.ctx.clearRect(i.turnDisplayWidth+20,i.moveYStart,2*i.moveWidth+2*i.moveXMargin,i.moveHeight+50),this.pokemonMoves=c[this.currentPlayer.party[0].name].moves;for(let e=0;e<Object.keys(this.pokemonMoves).length;e++){let t=n[this.pokemonMoves[Object.keys(this.pokemonMoves)[e]].type],a=e%2==0?i.moveXStart:i.moveXStart+i.moveWidth+10,s=e<2?i.moveYStart:i.moveYStart+i.moveHeight+10;this.ctx.fillStyle=t,this.ctx.fillRect(a,s,i.moveWidth,i.moveHeight),this.ctx.fillStyle="black"===t?"black":"white",this.ctx.font="bold 16px Verdana",this.ctx.textAlign="center",this.ctx.fillText(Object.keys(this.pokemonMoves)[e],a+i.moveWidth/2,s+i.moveHeight/2+5)}}switchDisplay(){this.ctx.textAlign="start",this.ctx.fillStyle="black",this.ctx.clearRect(i.pokemonXStart,i.pokemonYStart,6*i.pokemonWidth+5*i.pokemonXMargin,3*i.pokemonHeight);let e=[];for(let t=0;t<6;t++)e.push(i.pokemonXStart+i.pokemonXStart2*t);for(let t=0;t<6;t++){const a=i.pokemonYStart;this.ctx.fillStyle="black",this.ctx.fillRect(i.pokemonXMargin+e[t],a,i.pokemonWidth,i.pokemonHeight),this.ctx.fillStyle=0===t?r.selectedPokemon:"white",this.ctx.fillRect(i.pokemonXMargin+1+e[t],a+1,i.pokemonWidth-2,i.pokemonHeight-2);let s=new Image;s.src="images/icons/"+this.currentPlayer.party[t].name.toLowerCase()+".png",s.onload=()=>{if(this.currentPlayer.faint&&!t){this.ctx.clearRect(i.pokemonXStart,i.pokemonYStart,6*i.pokemonWidth+5*i.pokemonXMargin,3*i.pokemonHeight);for(let t=0;t<6;t++)this.ctx.fillStyle="black",this.ctx.fillRect(i.pokemonXMargin+e[t],a,i.pokemonWidth,i.pokemonHeight),this.ctx.fillStyle=0===t?r.selectedPokemon:"white",this.ctx.fillRect(i.pokemonXMargin+1+e[t],a+1,i.pokemonWidth-2,i.pokemonHeight-2)}this.ctx.drawImage(s,i.pokemonXMargin+2+e[t],a-5),this.ctx.font="13px Verdana",this.ctx.fillStyle="black","Mrmime"===this.currentPlayer.party[t].name?this.ctx.fillText("Mr. Mime",i.iconXStart+e[t],i.iconYStart+a):this.ctx.fillText(this.currentPlayer.party[t].name,i.iconXStart+e[t],i.iconYStart+a),this.ctx.fillText("HP: ",e[t]+20,i.hpYStart);let n,o=this.currentPlayer.party[t].currentStats.hp/(2*c[this.currentPlayer.party[t].name].hp+141);o>0&&o<.25?this.ctx.fillStyle="red":o>=.25&&o<.5?this.ctx.fillStyle="yellow":o>=.5&&o<.75?this.ctx.fillStyle="green":o>=.75&&o<=1&&(this.ctx.fillStyle="green"),n=.37+.63*o,o>=0&&(this.ctx.beginPath(),this.ctx.moveTo(e[t]+i.hpBarXMargin,i.hpBarYStart),this.ctx.lineTo(e[t]+i.moveWidth*n-5,i.hpBarYStart),this.ctx.quadraticCurveTo(e[t]+i.moveWidth*n,i.hpBarYStart+5,e[t]+i.moveWidth*n-5,i.hpBarYStart+10),this.ctx.lineTo(e[t]+i.hpBarXMargin,i.hpBarYStart+10),this.ctx.quadraticCurveTo(e[t]+i.hpBarXMargin-5,i.hpBarYStart+5,e[t]+i.hpBarXMargin,i.hpBarYStart),this.ctx.stroke(),this.ctx.fill()),this.ctx.fillStyle="black";let h=Math.round(this.currentPlayer.party[t].currentStats.hp);h=h<0?0:h,this.ctx.fillText(h.toString()+"/"+this.currentPlayer.party[t].fullHealth.toString(),e[t]+i.hpBarXMargin,i.hpBarYStart+30)}}}bindEventHandlers(){this.canvas.addEventListener("click",e=>{e.screenX>=this.xStart&&e.screenY>=this.yStart&&e.screenX<=this.xStart+5*i.pokemonXStart2+i.pokemonWidth&&e.screenY<=this.yStart+i.pokemonHeight?this.switchHandler(e):e.screenX>=i.moveXStart&&e.screenY>=i.moveClickY&&e.screenX<=i.moveXStart+2*i.moveWidth+10&&e.screenY<=i.moveClickY+2*i.moveHeight+10?this.moveHandler(e):e.screenX>=i.screenX+i.textXStart&&e.screenY>=i.screenY&&e.screenX<=i.screenX+i.textXStart+i.instructionButtonWidth&&e.screenY<=i.screenY+i.instructionButtonHeight?(this.paused=!0,this.audio.pause(),this.instructionsDisplay()):e.screenX>=i.xXStart&&e.screenY>=i.xYStart&&e.screenX<=i.xXEnd&&e.screenY<=i.xYEnd&&(this.paused=!1,this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height),this.drawTextbox(),this.drawOptionsDisplay(),this.audio.volume=.1,this.audio.play())})}switchHandler(e){for(let t=1;t<6;t++)if(e.screenX>=this.xStart+i.pokemonXStart2*t&&e.screenX<=this.xStart+i.pokemonXStart2*t+i.moveWidth)if(this.currentPlayer.party[t].currentStats.hp>0)if(this.currentPlayer.party[0].resetStats(),this.currentPlayer.party.unshift(this.currentPlayer.party.splice(t,1)[0]),this.messages["Turn "+this.turnCounter.toString()].push(this.currentPlayer.name+" sent out "+this.currentPlayer.party[0].name+"!"),this.currentPlayer.switched=!0,this.currentPlayer.faint){let e=this.currentPlayer===this.player1?this.player2:this.player1;this.afterPokemonSwitch(),this.messageDisplay(),this.currentPlayer.faint=!1,this.checkFaint(e.party[0],e)||(this.resetTurn(),this.currentPlayer=this.player1,this.drawOptionsDisplay())}else this.switchTurn();else this.drawOptionsDisplay()}moveHandler(e){if(this.currentPlayer.faint)return;let t,a;e.screenX>=i.moveXStart&&e.screenY>=i.moveClickY&&e.screenX<=i.moveXStart+i.moveWidth&&e.screenY<=i.moveClickY+i.moveHeight?(a=Object.keys(this.pokemonMoves)[0],t=Object.assign({},{[a]:Object.values(this.pokemonMoves)[0]})):e.screenX>=i.moveXStart+i.moveWidth+10&&e.screenY>=i.moveClickY&&e.screenX<=i.moveXStart+2*i.moveWidth+10&&e.screenY<=i.moveClickY+i.moveHeight?(a=Object.keys(this.pokemonMoves)[1],t=Object.assign({},{[a]:Object.values(this.pokemonMoves)[1]})):e.screenX>=i.moveXStart&&e.screenY>=i.moveClickY+i.moveHeight+10&&e.screenX<=i.moveXStart+i.moveWidth&&e.screenY<=i.moveClickY+i.moveHeight+2*i.moveHeight+10?(a=Object.keys(this.pokemonMoves)[2],t=Object.assign({},{[a]:Object.values(this.pokemonMoves)[2]})):e.screenX>=i.moveXStart+i.moveWidth+10&&e.screenY>=i.moveClickY+i.moveHeight+10&&e.screenX<=i.moveXStart+2*i.moveWidth+10&&e.screenY<=i.moveClickY+i.moveHeight+2*i.moveHeight+10&&(a=Object.keys(this.pokemonMoves)[3],t=Object.assign({},{[a]:Object.values(this.pokemonMoves)[3]})),t&&(this.currentPlayer.move=t,this.switchTurn())}switchTurn(){this.currentPlayer===this.player2&&this.finishTurn(),this.currentPlayer.faint||(this.currentPlayer=this.currentPlayer===this.player1?this.player2:this.player1,this.drawOptionsDisplay())}afterPokemonSwitch(){this.player1.switched&&(this.currentLoopIndex2=0),this.player2.switched&&(this.currentLoopIndex1=0),this.getAnimationInfo()}determineOrder(){}handleMove(){let e=this.player1.party[0],t=this.player2.party[0];if(this.player1.move&&this.player2.move){let a,s,i,r,n,o;(i=Object.values(this.player1.move)[0].priority&&(!Object.values(this.player2.move)[0].priority||Object.values(this.player1.move)[0].priority>Object.values(this.player2.move)[0].priority)?e:Object.values(this.player2.move)[0].priority&&(!Object.values(this.player1.move)[0].priority||Object.values(this.player2.move)[0].priority>Object.values(this.player1.move)[0].priority)?t:e.currentStats.speed>=t.currentStats.speed?e:t.currentStats.speed>e.currentStats.speed?t:Math.floor(2*Math.random())<1?e:t)===e?(r=t,n=this.player1.move,o=this.player2.move,a=this.player1,s=this.player2):(r=e,n=this.player2.move,o=this.player1.move,a=this.player2,s=this.player1),this.messages["Turn "+this.turnCounter.toString()].push(a.name+"'s "+i.name+" used "+Object.keys(n)[0]+"!"),"Splash"===Object.keys(n)[0]?this.messages["Turn "+this.turnCounter.toString()].push("But nothing happened!"):(this.checkEffect(Object.values(n)[0],r)&&!this.checkMiss(Object.values(n)[0],i)&&this.calculateDamage(Object.values(n)[0],i,r),this.checkFaint(i)),this.checkFaint(r)||(this.messages["Turn "+this.turnCounter.toString()].push(s.name+"'s "+r.name+" used "+Object.keys(o)[0]+"!"),"Splash"===Object.keys(o)[0]?this.messages["Turn "+this.turnCounter.toString()].push("But nothing happened!"):this.checkEffect(Object.values(o)[0],i)&&!this.checkMiss(Object.values(o)[0],r)&&this.calculateDamage(Object.values(o)[0],r,i),this.checkFaint(r),this.checkFaint(i))}else this.player1.move?(this.messages["Turn "+this.turnCounter.toString()].push(this.player1.name+"'s "+e.name+" used "+Object.keys(this.player1.move)[0]+"!"),this.checkEffect(Object.values(this.player1.move)[0],t)&&!this.checkMiss(Object.values(this.player1.move)[0],e)&&this.calculateDamage(Object.values(this.player1.move)[0],e,t),this.checkFaint(e,this.player1),this.checkFaint(t,this.player2)):this.player2.move&&(this.messages["Turn "+this.turnCounter.toString()].push(this.player2.name+"'s "+t.name+" used "+Object.keys(this.player2.move)[0]+"!"),this.checkEffect(Object.values(this.player2.move)[0],e)&&!this.checkMiss(Object.values(this.player2.move)[0],t)&&this.calculateDamage(Object.values(this.player2.move)[0],t,e),this.checkFaint(t,this.player2),this.checkFaint(e,this.player1))}checkMiss(e,t){return 100*Math.random()>e.accuracy&&(this.messages["Turn "+this.turnCounter.toString()].push(t.name+"'s attack missed!"),!0)}checkEffect(e,t){let a=!0;return t.currentStats.types.forEach(t=>{0===h[e.type][t]&&(this.messages["Turn "+this.turnCounter.toString()].push("But it had no effect..."),a=!1)}),a}calculateDamage(e,t,a){let s,i,r=1,n=1;if(e.power>0||"level"===e.power){"physical"===e.category?(s=t.currentStats.attack,i=a.currentStats.defense):(s=t.currentStats.spAtk,i=a.currentStats.spDef),t.currentStats.types.includes(e.type)&&(r=1.2);let o=(20*Math.random()+90)/100;a.currentStats.types.forEach(t=>{h[e.type][t]&&(n*=h[e.type][t])});let c=(42*e.power*s/i/50+2)*r*o*n;"level"===e.power&&(c=100);let l=Math.min(100,Math.round(c/a.fullHealth*1e3)/10),p=Math.round(1e3*a.currentStats.hp/a.fullHealth)/10;a.currentStats.hp-=c;let y=a.currentStats.hp>0?l:p;if(n>1?this.messages["Turn "+this.turnCounter.toString()].push("It's super effective!"):n<1&&n>0?this.messages["Turn "+this.turnCounter.toString()].push("It's not very effective..."):n||this.messages["Turn "+this.turnCounter.toString()].push("But it had no effect..."),this.messages["Turn "+this.turnCounter.toString()].push("The opposing "+a.name+" lost "+y.toString()+"% of its health!"),e.recoil){let a;if(e.recoil>0){a=e.recoil/100*c;let s=Math.min(Math.round(1e3*t.currentStats.hp/t.fullHealth)/10,Math.round(a/t.fullHealth*1e3)/10);this.messages["Turn "+this.turnCounter.toString()].push(t.name+" lost "+s.toString()+"% of its health due to recoil!"),t.currentStats.hp-=a}else{a=Math.abs(e.recoil)/100*c;let s=Math.min(Math.round(1e3*(t.fullHealth-t.currentStats.hp)/10),Math.round(a/t.fullHealth*1e3)/10);s?this.messages["Turn "+this.turnCounter.toString()].push(t.name+" restored "+s.toString()+"% of its health!"):this.messages["Turn "+this.turnCounter.toString()].push(t.name+" is at full health!"),t.currentStats.hp=Math.min(t.currentStats.hp+a,t.fullHealth)}}}else{let s=e.self?t:a;e.categories.forEach((t,a)=>{if("hp"===t)if(s.currentStats.hp===s.fullHealth)this.messages["Turn "+this.turnCounter.toString()].push(s.name+"'s health can't go any higher!");else{let t=Math.min(50,Math.round(1e3*(s.fullHealth-s.currentStats.hp)/10));s.currentStats.hp=Math.min(s.currentStats.hp*(1+e.multipliers[0]),s.fullHealth),this.messages["Turn "+this.turnCounter.toString()].push(s.name+" restored "+t.toString()+"% of its health!")}else if(6===s.statChanges[t]&&e.multipliers[a]>0)this.messages["Turn "+this.turnCounter.toString()].push(s.name+"'s "+t+" can't go any higher!");else if(-6===s.statChanges[t]&&e.multipliers[a]<0)this.messages["Turn "+this.turnCounter.toString()].push("The opposing "+s.name+"'s "+t+" can't go any lower!");else{s.statChanges[t]+=e.multipliers[a],s.statChanges[t]>6?s.statChanges[t]=6:s.statChanges[t]<-6&&(s.statChanges[t]=-6);let i=s.statChanges[t]>=0?(2+s.statChanges[t])/2:2/(2-s.statChanges[t]);s.currentStats[t]=c[s.name][t]*i;let r=e.multipliers[a]>0?" rose!":" fell!";e.self?this.messages["Turn "+this.turnCounter.toString()].push(s.name+"'s "+t+r):this.messages["Turn "+this.turnCounter.toString()].push("The opposing "+s.name+"'s "+t+r)}})}}checkFaint(e,t=null){if(e.currentStats.hp<=0){let a=(t?t.name:this.currentPlayer.name)+"'s "+e.name+" fainted!";return this.messages["Turn "+this.turnCounter.toString()].includes(a)||this.messages["Turn "+this.turnCounter.toString()].push(a),this.checkGameOver(),e===this.player1.party[0]&&(this.currentPlayer=this.player1),t&&(this.currentPlayer=t),this.currentPlayer.faint=!0,this.drawOptionsDisplay(),!0}return!1}resetTurn(){this.player1.switched=!1,this.player2.switched=!1,this.player1.move=null,this.player2.move=null,this.player1.faint=!1,this.player2.faint=!1,this.turnCounter++,this.messages["Turn "+this.turnCounter.toString()]=[],this.messageDisplay()}finishTurn(){this.afterPokemonSwitch(),this.handleMove(),this.currentPlayer.faint||this.resetTurn(),this.messageDisplay()}checkGameOver(){let e=Object.values(this.player1.party).filter(e=>e.currentStats.hp>0),t=Object.values(this.player2.party).filter(e=>e.currentStats.hp>0);return(0===e.length||0===t.length)&&(e.length,this.messages["Turn "+this.turnCounter.toString()].push(this.player2.name+" wins!"),this.audio.pause(),this.messageDisplay(),!0)}}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("board");document.body.style.zoom=1;document.body.style.webkitTransform="scale(1)",document.body.style.msTransform="scale(1)",document.body.style.transform="scale(1)",new y(e)})}]);